<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>计数排序</title>
</head>
<body>
  <script>
    function countingSort(arr) {
      if(arr.length <= 1) return arr;
      let maxVal = findMax(arr);
      let res = new Array(maxVal + 1);
      arr.forEach(item => {
        if(!res[item]) {
          res[item] = 0;
        }
        res[item]++;
      })
      let sortIndex = 0;
      res.forEach((item, index) => {
        if(item && item > 0) {
          let num = item;
          while(num > 0) {
            arr[sortIndex++] = index;
            num--;
          }
        }
      })
      return arr;
    }
    function findMax(arr) {
      let max = arr[0]
      for (let i = 1; i < arr.length; i++) {
        if(arr[i] > max) {
          max = arr[i]
        }
      }
      return max;
    }
    // test
    let arr = [4, 6, 1, 2, 6, 2, 8, 2, 18, 45, 22, 2]
    console.log(countingSort(arr));
  </script>
</body>
</html>